<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="./img/favicon.svg" type="image/x-icon">
  <link rel="stylesheet" href="https://necolas.github.io/normalize.css/8.0.1/normalize.css">
  <link rel="stylesheet" href="./css/style.css">
  <title>train</title>
  <!-- START GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/MotionPathPlugin.min.js"></script>
  <!-- END GSAP -->
</head>

<style>
  svg {
    border: 1px solid #777;
  }

  .yourPath {
    stroke-width: 10px;
    stroke: rgb(136, 206, 2);
  }

  .selector {
    position: absolute;
    width: 20px;
    height: 20px;
    background-color: orange;
  }
</style>

<body>
  <div class="trains">
    <div class="container">
      <div class="train">
        <img class="train_js" src="./img/train.svg" class="train_js" style="position: absolute; z-index: 5;">
        <div class="train__img">
          <img src="./img/map.jpg" alt="">
        </div>
        <svg id="map" width="1200" height="650" xmlns="http://www.w3.org/2000/svg">
          <path class="map-path-1"
            d="M655.8 499.5C681.8 484.8 712.8 479.1 742.3 483.6C786.2 490.3 824.2 518.2 867.4 528.9C893 535.2 919.6 535.3 945.9 535.3C960.9 535.3 976.1 535.3 990.5 531C1004.4 526.8 1017 518.7 1026.5 507.7" />
          <path class="map-path-2"
            d="M1031.2 499.9C1048.8 489.6 1065.8 477.3 1077.7 460.8C1089.6 444.3 1096 422.7 1090.8 403C1084.5 379.1 1062.6 362.1 1039.5 353.4C1016.3 344.8 991.3 342.8 967 338.2C942.7 333.5 917.8 325.4 900.9 307.4" />
          <path 
            d="M94.9004 537.3C133.6 521 176.6 514.9 218.3 519.8C232.3 521.5 246.2 524.3 260.3 525.5C281.3 527.3 302.6 525.3 322.9 519.6" />
            <path class="test-class"
              d="M332.1 522.6C351.1 533.6 375.9 533.9 395.1 523.1C420.1 509.1 435.8 478.5 464 473.4C489.5 468.8 512.6 487.2 536.1 498C572.4 514.6 616.6 513 651.6 493.8" />
          <path
            d="M190.9 130.9C176.9 141.1 162.9 151.3 148.9 161.5C136.2 170.7 122.9 180.7 117.1 195.2C110.8 210.7 114.4 228.6 121.4 243.7C128.5 258.8 138.8 272.2 147.1 286.7C157.3 304.7 164.3 324.5 167.7 344.9" />
          <path
            d="M579.3 98.8995C563.7 105.8 548.1 112.8 532.7 120.1C511.7 130 489.9 141.2 477.3 160.7C462.9 183 463.5 212.1 470.8 237.6C475.9 255.2 485.2 273.3 502 280.6" />
          <path
            d="M195.8 135.6C230.4 116.6 268.1 96.9996 307.3 101.9C334.6 105.3 359.3 120.3 386.5 123.9C417.8 128 448.7 116.6 478.8 107.2C508.9 97.7996 551.4 90.2996 580.8 101.6C611.3 96.8996 642.8 98.7996 672.5 107.1C693 112.8 713.1 121.6 734.4 122.5C801.3 125.3 854.5 51.5996 921.1 58.0996C942.5 60.1996 962.1 70.5996 980.2 82.1996C992.5 90.0996 1004.7 98.6996 1018.8 102.5" />
          <path
            d="M503.3 278.7C511.7 282.6 521.8 279.8 529.9 275.4C538.1 270.9 545.4 264.9 554 261.6C565.7 257.2 579.4 258.4 590.1 264.9C602.4 272.3 609.8 285.4 619.2 296.3C633.7 313 653.7 324.9 675.3 329.6C686.3 332 697.9 332.6 708.9 329.9C720.1 327.2 730.3 321.3 740.5 315.9C769.7 300.4 803.1 288.6 835.5 295.2C857.3 299.7 878.8 312.4 900.4 307.1" />
          <path
            d="M176.1 339.7C186.8 322.7 189.6 299.7 206.2 288.4C219.6 279.3 238 281.2 252.6 288.2C267.2 295.1 279.4 306.3 292.5 315.7C322.5 337.2 363 349.5 396.5 333.9C415.4 325.1 429.4 308.7 445.8 295.8C456.6 287.3 468.6 280.2 481.3 274.8" />
          <path
            d="M1023.4 103.9C1014.4 123.5 1029.4 145.8 1046.1 159.5C1062.8 173.2 1083.2 185.4 1089.7 206C1096.5 227.4 1084.9 251.5 1066.8 264.8C1048.7 278.1 1025.5 282.5 1003.1 283.8C980.7 285.1 958 283.7 935.8 287.1C921 289.3 905.5 294.4 896.6 306.4" />
          <path
            d="M502.5 281.4C499.2 295.9 505.5 311.1 515.1 322.5C524.7 333.8 537.4 342.1 549.4 350.7C573.5 368.1 596 388.2 613 412.6C630 437 641.2 466 641.2 495.8" />
          <path
            d="M1031.2 499.9C1048.8 489.6 1065.8 477.3 1077.7 460.8C1089.6 444.3 1096 422.7 1090.8 403C1084.5 379.1 1062.6 362.1 1039.5 353.4C1016.3 344.8 991.3 342.8 967 338.2C942.7 333.5 917.8 325.4 900.9 307.4" />
          <path
            d="M174.5 341.7C185.7 361.7 196.9 381.7 208.1 401.7C214 412.1 220.1 422.9 229.5 430.2C236.1 435.4 244.1 438.5 251.6 442.3C282.9 457.9 308.6 484.3 323.3 516.1" />
        </svg>
      </div>
    </div>
  </div>

  <!-- <div class="train_js"> -->
    
  <div class="selector">
  
  </div>

  <script>
    gsap.registerPlugin(MotionPathPlugin)

      function currentPositionElement(params) {
        
      }

      // const selector = '.selector'

      // const localMap = { x: 0, y: 0 }


      const trainJs = '.train_js'
      // you can fund out the position of x or y property
      const trainJsProperties = document.querySelector('.train_js')._gsap;

      const mapAllPaths = document.querySelectorAll('#map path')


      const mapPathOne = document.querySelector('.map-path-1')
      const mapPathTwo = document.querySelector('.map-path-2')      

      /* start the function */
      let mapCurrentPath = document.querySelector('.map-path-1')
      let mapCurrentPathArray = MotionPathPlugin.getRawPath(mapCurrentPath)[0]
      let mapCurrentPathArrayLength = mapCurrentPathArray.length
      
      let mapCurrentPathStartX = mapCurrentPathArray[0]
      console.log('mapCurrentPathStartX: ', mapCurrentPathStartX);
      let mapCurrentPathStartY = mapCurrentPathArray[1]
      console.log('mapCurrentPathStartY: ', mapCurrentPathStartY);
      let mapCurrentPathEndX = mapCurrentPathArray[mapCurrentPathArrayLength - 2]
      console.log('mapCurrentPathEndX: ', mapCurrentPathEndX);
      let mapCurrentPathEndY = mapCurrentPathArray[mapCurrentPathArrayLength - 1]
      console.log('mapCurrentPathEndY: ', mapCurrentPathEndY);
      
      const trainSound = new Audio('./audio/train-sound.mp3');

      gsap.to(trainJs, {
        motionPath: {
          path: mapCurrentPath,
          align: mapCurrentPath,
          alignOrigin: [0.5, 0.5],
          autoRotate: true,
          end: 0,
        },
        duration: 1,
      },
      )

      mapAllPaths.forEach((item, i) => {
        item.addEventListener('click', (e) => {
          trainSound.pause();
          trainSound.currentTime = 0
          trainSound.play()

          gsap.to(trainJs, {
            motionPath: {
              path: item,
              align: item,
              alignOrigin: [0.5, 0.5],
              autoRotate: true,
              start: 0,
              end: 1,
            },
            duration: 5,
          },


          )
        })
      })      

      

      // find out the coordinates
      // let rawPath = MotionPathPlugin.getRawPath(mapPathOne)
      
      // let point = MotionPathPlugin.getPositionOnPath(rawPath, 0.5, true)

      // console.log(rawPath);

  </script>
</body>
</html>